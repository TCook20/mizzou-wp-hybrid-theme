{# Imports #}
{% from "@miz/components/button/button.twig" import AnchorButton as anchorButton %}

{% set sectionClasses = '' %}
{% if flexgroup.displayOptions.plus_decoration %}
	{% set sectionClasses = sectionClasses ~ ' miz-decoration miz-decoration__plus' %}

	{% if flexgroup.displayOptions.decoration_location is iterable %}
		{% for location in flexgroup.displayOptions.decoration_location %}
			{% set sectionClasses = sectionClasses ~ " miz-decoration__plus--#{ location }" %}
		{% endfor %}
	{% endif %}
{% endif %}

{% if flexgroup.displayOptions.layer_background == 'miz-black-100' %}
	{% set sectionClasses = sectionClasses ~ ' miz-fill--black-100' %}
{% elseif flexgroup.displayOptions.layer_background == 'miz-black' %}
	{% set sectionClasses = sectionClasses ~ ' miz-fill--black' %}
{% elseif flexgroup.displayOptions.layer_background == 'miz-white' %}
	{% set sectionClasses = sectionClasses ~ ' miz-fill--white' %}
{% else %}
{% endif %}

{% set hasLayerBackgroundImage = false %}
{% if flexgroup.displayOptions.image and flexgroup.displayOptions.layer_background == 'image' %}
	{% set hasLayerBackgroundImage = true %}
	{% set LayerBackgroundImage = Image(flexgroup.displayOptions.image).src %}
{% endif %}

{# Set Variables #}
{% set bigMessageLayer = {
    'title': flexgroup.title,
    'content': flexgroup.message,
    'buttons': flexgroup.buttons,
	'classes': {
		'section': 'miz-layer miz-layer--brand miz-main-grid__full' ~ sectionClasses,
		'frame': 'miz-big-message__frame miz-fill--white',
		'content': 'miz-layer__content miz-layer__content--center miz-big-message__content',
		'button': 'miz-button--secondary miz-button--brand'
	},
	'style': {
		'section': hasLayerBackgroundImage ? "background: #F1B82D url('" ~ LayerBackgroundImage ~ "') center/cover " : ''
	}
} %}

<section class="{{ bigMessageLayer.classes.section }}"{% if bigMessageLayer.style.section != '' %} style="{{ bigMessageLayer.style.section }}"{% endif %}>
    <div class="miz-container">
        <div class="miz-decoration miz-decoration__corner--top-left">
            <div class="{{ bigMessageLayer.classes.frame }}">
                <header class="miz-layer__header miz-layer__header--center">
                    <h2 class="miz-layer__title">{{ bigMessageLayer.title }}</h2>
                </header>

                <div class="{{ bigMessageLayer.classes.content }}">
                    {{ bigMessageLayer.content }}

                    {% if bigMessageLayer.buttons is defined and bigMessageLayer.buttons is iterable %}
                        {% for Button in bigMessageLayer.buttons %}
                            {% set ButtonOptions = { "class": bigMessageLayer.classes.button, "text": Button.button.title, 'href': Button.button.url} %}
                            {{ anchorButton( ButtonOptions ) }}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>
